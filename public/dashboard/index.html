<!DOCTYPE html>
<html>
<head>
<title>Mitra Inbox</title>
<style>
body{
  background:#0f172a;
  color:white;
  font-family:Arial;
}
.chat{
  border-bottom:1px solid #333;
  padding:10px;
}
.phone{
  color:#38bdf8;
}
</style>
</head>

<body>

<h2>Inbox Mitra Nagari</h2>
<div id="chat"></div>

<script>
async function load(){
  const r = await fetch("/api/getChats")
  const data = await r.json()

  const el = document.getElementById("chat")
  el.innerHTML=""

  // skip header row
  data.slice(1).reverse().forEach(row=>{
    el.innerHTML += `
      <div class="chat">
        <div class="phone">${row[1]}</div>
        <div>${row[3]}</div>
        <div style="color:#22c55e">${row[4]||""}</div>
      </div>
    `
  })
}

setInterval(load,3000)
load()
</script>

</body>
</html>
